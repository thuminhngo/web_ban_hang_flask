<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Qu·∫£n l√Ω s·∫£n ph·∫©m</title>
  <style>
    .container {
      display: flex;
      gap: 20px;
      padding: 20px;
      font-family: Arial, sans-serif;
    }

    .form-section {
      flex: 4;
      border: 1px solid #ccc;
      padding: 20px;
      border-radius: 10px;
      background: #f9f9f9;
    }

    .list-section {
      flex: 6;
      border: 1px solid #ccc;
      padding: 20px;
      border-radius: 10px;
      background: #ffffff;
    }

    h2 {
      text-align: center;
      color: #2c3e50;
    }

    input, textarea {
      width: 100%;
      margin-bottom: 10px;
      padding: 8px;
    }

    button {
      padding: 10px 20px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    table, th, td {
      border: 1px solid #ddd;
    }

    th, td {
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Ph·∫ßn 4/10: Th√™m ho·∫∑c S·ª≠a s·∫£n ph·∫©m -->
    <div class="form-section">
      <h2>{{ '‚úèÔ∏è S·ª≠a s·∫£n ph·∫©m' if san_pham else '‚ûï Th√™m s·∫£n ph·∫©m' }}</h2>
      <form method="POST" action="{{ url_for('admin_bp.cap_nhat_san_pham', ma_sp=san_pham.ma_san_pham) if san_pham else url_for('admin_bp.admin') }}">
        <label>T√™n:</label>
        <input type="text" name="ten" value="{{ san_pham.ten_san_pham if san_pham else '' }}" required>

        <label>M√¥ t·∫£:</label>
        <textarea name="mo_ta">{{ san_pham.mo_ta if san_pham else '' }}</textarea>

        <label>Gi√°:</label>
        <input type="number" step="0.01" name="gia" value="{{ san_pham.gia if san_pham else '' }}" required>

        <label>S·ªë l∆∞·ª£ng:</label>
        <input type="number" name="so_luong" value="{{ san_pham.so_luong_ton if san_pham else '' }}" required>

        <label>H√¨nh ·∫£nh:</label>
        <input type="text" name="hinh_anh" value="{{ san_pham.hinh_anh if san_pham else '' }}" required>

        <button type="submit">{{ 'C·∫≠p nh·∫≠t' if san_pham else 'Th√™m' }}</button>
      </form>
    </div>

    <!-- Ph·∫ßn 6/10: Danh s√°ch s·∫£n ph·∫©m -->
    <div class="list-section">
      <h2>üìã Danh s√°ch s·∫£n ph·∫©m</h2>
      <table>
        <thead>
          <tr>
            <th>M√£</th>
            <th>T√™n</th>
            <th>Gi√°</th>
            <th>S·ªë l∆∞·ª£ng</th>
            <th>M√¥ t·∫£</th>
            <th>H√¨nh ·∫£nh</th>
          </tr>
        </thead>
        <tbody>
          {% for sp in danh_sach %}
          <tr>
            <td>
              <a href="{{ url_for('admin_bp.sua_san_pham', ma_sp=sp.ma_san_pham) }}">
                {{ sp.ma_san_pham }}
              </a>
            </td>
            <td>{{ sp.ten_san_pham }}</td>
            <td>{{ "{:,.0f}".format(sp.gia) }}</td>
            <td>{{ sp.so_luong_ton }}</td>
            <td>{{ sp.mo_ta }}</td>
            <td>
              {% if sp.hinh_anh %}
                <img src="{{ url_for('static', filename=sp.hinh_anh) }}" alt="{{ sp.ten_san_pham }}" style="width: 50px; height: 50px;">
              {% else %}
                <img src="{{ url_for('static', filename='default.png') }}" alt="{{ sp.ten_san_pham }}" style="width: 50px; height: 50px;">
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
